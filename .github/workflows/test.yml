name: Test Project
on: [workflow_dispatch]
jobs:
  test:
    runs-on: ubuntu-latest
    outputs:
      script-data: ${{ steps.publish.outputs.my-key }}
    steps:
      - name: Get Code
        uses: actions/checkout@v3
      - name: Gradle build and test
        run: |
            ./gradlew build
            ./gradlew test
      - name: Publish Filename
        id: publish
        run: echo "my-key=$(cat README.md)" >> $GITHUB_OUTPUT
  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Get Code
        uses: actions/checkout@v3
      - name: Gradle build run
        run: |
          ./gradlew build
          echo "Deployment Completed..!!"
      - name: Output Data
        run: echo "${{ needs.test.outputs.script-data }}"
